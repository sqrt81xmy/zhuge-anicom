{"version":3,"sources":["FloatImg.js"],"names":["useFloatImg","rootClassName","candidateImg","imgStyle","moveTimeRef","cntRef","previousCursor","x","y","handleMouseMove","e","current","setTimeout","clientX","clientY","preX","preY","dis","Math","abs","img","document","createElement","array","len","length","cur","src","style","position","top","left","width","height","borderRadius","opacity","transform","isMap","Map","keys","Object","key","value","get","setProperty","parent","getElementsByClassName","appendChild","gsap","to","duration","scaleX","scaleY","removeChild"],"mappings":"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","sourcesContent":["import { useRef } from \"react\";\r\nimport gsap from \"gsap-trial\"\r\nimport React from \"react\"\r\nfunction useFloatImg(rootClassName,candidateImg,imgStyle) {  \r\n    const moveTimeRef = useRef(null);\r\n    const cntRef = useRef(0);\r\n    const previousCursor = useRef({x:null,y:null});\r\n\r\n    const handleMouseMove = (e)=>{  \r\n        //设计一个节流\r\n        if(moveTimeRef.current != null){\r\n            return ;\r\n        }\r\n        moveTimeRef.current = setTimeout(()=>{\r\n            moveTimeRef.current = null;\r\n        },460);\r\n        // console.log(\"e.x e.y\",e.clientX,e.clientY); 鼠标移动的坐标点\r\n        \r\n        //下面获取鼠标移动的向量\r\n        // const vectorX = e.clientX - lastMoveX.current;\r\n        // const vectorY = e.clientY - lastMoveY.current;\r\n        //让3个球往这边移动一点：\r\n        // gsap.to(\".animation-ball\", {  y: 0.03 * vectorY, x: 0.03 * vectorX,\r\n        //     duration: 0.6, opacity:1 });\r\n\r\n        //下面获取坐标x、y,在这个坐标上放一些图片\r\n        const x = e.clientX;\r\n        const y = e.clientY;\r\n        // console.log(x,0.77*window.innerWidth,x>0.77*window.innerWidth,y,window.innerHeight-0.18*window.innerWidth,y>0.82*window.innerWidth)\r\n        // if(x>0.73*window.innerWidth&&y>window.innerHeight-0.22*window.innerWidth){\r\n        //     console.log(\"return;\")\r\n        //     return ;//右下角按钮\r\n        // }\r\n        // if(x<0.23*window.innerWidth && y>window.innerHeight-0.18*window.innerWidth){\r\n        //     console.log(\"return;\")\r\n        //     return;//左下角按钮\r\n        // }\r\n        if(previousCursor.current.x){\r\n            const preX = previousCursor.current.x;\r\n            const preY = previousCursor.current.y;\r\n            const dis = Math.abs(preX-x) + Math.abs(preY-y);\r\n            // console.log(dis);\r\n            if(dis<30){\r\n                return ;\r\n            } \r\n        }\r\n        previousCursor.current.x = x;\r\n        previousCursor.current.y = y;\r\n        const img = document.createElement('img');\r\n        const array = candidateImg;\r\n        const len = array.length;\r\n        const cur = cntRef.current;\r\n        cntRef.current = cur+1;\r\n        const src = array[cur%len];\r\n        img.src = src;\r\n        img.style.position = 'fixed';\r\n        img.style.top = `${y}px`;\r\n        img.style.left = `${x}px`;\r\n        img.style.width = '15%';\r\n        img.style.height = '20%';\r\n        img.style.borderRadius = '20px'; \r\n        // img.style.transitionDuration = '1s';\r\n        img.style.opacity = 0.7;\r\n        img.style.transform = 'scale(0.5)';\r\n        // 判断是否是Map类型\r\n        const isMap = imgStyle instanceof Map;\r\n        \r\n        // 获取键集合\r\n        const keys = isMap ? [...imgStyle.keys()] : Object.keys(imgStyle);\r\n        \r\n        for (const key of keys) {\r\n            // 获取值\r\n            const value = isMap ? imgStyle.get(key) : imgStyle[key]; \r\n            img.style.setProperty(key, value);\r\n            // console.log(key,imgStyle[key],imgStyle.get(key),img.style)\r\n        }\r\n        const parent = document.getElementsByClassName(rootClassName)[0];\r\n        parent.appendChild(img); \r\n        // img.style.opacity = 1;\r\n        // setTimeout(()=>{\r\n\r\n        // },)\r\n        gsap.to(img,\r\n            {duration: 0.8,scaleX:1,scaleY:1,opacity:1})\r\n        setTimeout(()=>{ \r\n            gsap.to(img,\r\n                {duration: 0.5,scaleX:0.5,scaleY:0.5,opacity:0})\r\n            setTimeout(()=>{\r\n                parent.removeChild(img);\r\n            },500) \r\n        },1000)\r\n    }\r\n    return handleMouseMove\r\n}\r\n\r\nexport default useFloatImg\r\n"],"file":"FloatImg.dev.js"}