{"version":3,"sources":["FloatImg.js"],"names":["_react","_interopRequireWildcard","require","_gsapTrial","_interopRequireDefault","useFloatImg","rootClassName","candidateImg","imgStyle","moveTimeRef","useRef","cntRef","previousCursor","x","y","e","current","setTimeout","clientX","clientY","preX","preY","Math","abs","img","document","createElement","array","len","length","cur","src","style","position","top","concat","left","width","height","borderRadius","opacity","isMap","Map","keys","_toConsumableArray","Object","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","key","value","get","err","parent","getElementsByClassName","to","duration","scaleX","scaleY","removeChild"],"mappings":"4UAAA,IAAAA,OAAAC,wBAAAC,QAAA,UACAC,WAAAC,uBAAAF,QAAA,upCAEA,SAASG,YAAYC,EAAcC,EAAaC,GAC5C,IAAMC,GAAc,EAAAT,OAAAU,QAAO,MACrBC,GAAS,EAAAX,OAAAU,QAAO,GAChBE,GAAiB,EAAAZ,OAAAU,QAAO,CAACG,EAAE,KAAKC,EAAE,OA2DpC,OAzDoB,SAACC,GAErB,GAA0B,MAAvBN,EAAYO,QAAf,CAGAP,EAAYO,QAAUC,WAAW,WAC7BR,EAAYO,QAAU,MACxB,KAWF,IAAMH,EAAIE,EAAEG,QAvBXb,EAAAA,EAATc,QAOWV,GAAAA,EAAYO,QAAWH,EAA1B,CACI,IAAAO,EAAAR,EAAAI,QAAAH,EACHQ,EAAAT,EAAAI,QAAAF,EAEGL,GA0BYa,KAAKC,IAAIH,EAAKP,GAAKS,KAAKC,IAAIF,EAAKP,GA1BjCE,GAEhB,OAIAJ,EAAAI,QAAAH,EAAAA,EACAD,EAAAI,QAAAF,EAAAA,EACA,IAAAU,EAAAC,SAAAC,cAAA,OACAC,EAAApB,EAEAqB,EAAAD,EAAAE,OA0BMC,EAAMnB,EAAOK,QAzBbH,EAAMK,QAAZY,EAAA,EACMhB,IAAMK,EAAAA,EACZW,EAAAF,GACAJ,EAAAO,IAAAA,EACAP,EAAAQ,MAAAC,SAAA,QACAT,EAAAQ,MAAAE,IAAA,GAAAC,OAAArB,EAAA,MACAU,EAAAQ,MAAAI,KAAA,GAAAD,OAAAtB,EAAA,MACAW,EAAAQ,MAAAK,MAAA,MACAb,EAAAQ,MAAAM,OAAA,MACAd,EAAAQ,MAAAO,aAAA,OA2BAf,EAAIQ,MAAMQ,QAAU,GAzBjB5B,EAAAA,MAAAA,UAAA,aAEC,IAAU6B,EAAG7B,aAAb8B,IAGMC,EAAIF,EAAAG,mBAAApC,EAAAmC,QAAAE,OAAAF,KAAAnC,GAlCWsC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAoCpB,IAAA,IAAAC,EAAAC,EAAAR,EAAAS,OAAAC,cAAAP,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,EAAA,CAAA,IAAAU,EAAAN,EAAAO,MA4BKA,EAAQhB,EAAQjC,EAASkD,IAAIF,GAAOhD,EAASgD,GA1BvD5C,EAAAA,MAAeI,YAAfwC,EAAAC,IAtCyB,MAAAE,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,QAAA,IAAAb,GAAA,MAAAK,EAAA,QAAAA,EAAA,SAAA,QAAA,GAAAJ,EAAA,MAAAC,GAyCnBrB,IAAKiC,EAAGrD,SAAdsD,uBAAAvD,GAAA,GACMsB,EAAMD,YAAZH,GAKIQ,WAAAA,QAAJ8B,GAAU7B,EACND,CAAJ+B,SAAA,GAAAC,OAAA,EAAAC,OAAA,EAAAzB,QAAA,IACIR,WAAJ,WACIA,WAAAA,QAAMK,GAAVb,EACUc,CAAAA,SAAS,GAAnB0B,OAAA,GAAAC,OAAA,GAAAzB,QAAA,IACIR,WAAMO,WA4BFqB,EAAOM,YAAY1C,IA1BjBgB,MACNR,oBAvDqB3B","file":"FloatImg.min.js","sourcesContent":["import { useRef } from \"react\";\r\nimport gsap from \"gsap-trial\"\r\nimport React from \"react\"\r\nfunction useFloatImg(rootClassName,candidateImg,imgStyle) {  \r\n    const moveTimeRef = useRef(null);\r\n    const cntRef = useRef(0);\r\n    const previousCursor = useRef({x:null,y:null});\r\n\r\n    const handleMouseMove = (e)=>{  \r\n        //设计一个节流\r\n        if(moveTimeRef.current != null){\r\n            return ;\r\n        }\r\n        moveTimeRef.current = setTimeout(()=>{\r\n            moveTimeRef.current = null;\r\n        },460);\r\n        // console.log(\"e.x e.y\",e.clientX,e.clientY); 鼠标移动的坐标点\r\n        \r\n        //下面获取鼠标移动的向量\r\n        // const vectorX = e.clientX - lastMoveX.current;\r\n        // const vectorY = e.clientY - lastMoveY.current;\r\n        //让3个球往这边移动一点：\r\n        // gsap.to(\".animation-ball\", {  y: 0.03 * vectorY, x: 0.03 * vectorX,\r\n        //     duration: 0.6, opacity:1 });\r\n\r\n        //下面获取坐标x、y,在这个坐标上放一些图片\r\n        const x = e.clientX;\r\n        const y = e.clientY;\r\n        // console.log(x,0.77*window.innerWidth,x>0.77*window.innerWidth,y,window.innerHeight-0.18*window.innerWidth,y>0.82*window.innerWidth)\r\n        // if(x>0.73*window.innerWidth&&y>window.innerHeight-0.22*window.innerWidth){\r\n        //     console.log(\"return;\")\r\n        //     return ;//右下角按钮\r\n        // }\r\n        // if(x<0.23*window.innerWidth && y>window.innerHeight-0.18*window.innerWidth){\r\n        //     console.log(\"return;\")\r\n        //     return;//左下角按钮\r\n        // }\r\n        if(previousCursor.current.x){\r\n            const preX = previousCursor.current.x;\r\n            const preY = previousCursor.current.y;\r\n            const dis = Math.abs(preX-x) + Math.abs(preY-y);\r\n            // console.log(dis);\r\n            if(dis<30){\r\n                return ;\r\n            } \r\n        }\r\n        previousCursor.current.x = x;\r\n        previousCursor.current.y = y;\r\n        const img = document.createElement('img');\r\n        const array = candidateImg;\r\n        const len = array.length;\r\n        const cur = cntRef.current;\r\n        cntRef.current = cur+1;\r\n        const src = array[cur%len];\r\n        img.src = src;\r\n        img.style.position = 'fixed';\r\n        img.style.top = `${y}px`;\r\n        img.style.left = `${x}px`;\r\n        img.style.width = '15%';\r\n        img.style.height = '20%';\r\n        img.style.borderRadius = '20px'; \r\n        // img.style.transitionDuration = '1s';\r\n        img.style.opacity = 0.7;\r\n        img.style.transform = 'scale(0.5)';\r\n        // 判断是否是Map类型\r\n        const isMap = imgStyle instanceof Map;\r\n        \r\n        // 获取键集合\r\n        const keys = isMap ? [...imgStyle.keys()] : Object.keys(imgStyle);\r\n        \r\n        for (const key of keys) {\r\n            // 获取值\r\n            const value = isMap ? imgStyle.get(key) : imgStyle[key]; \r\n            img.style.setProperty(key, value);\r\n            // console.log(key,imgStyle[key],imgStyle.get(key),img.style)\r\n        }\r\n        const parent = document.getElementsByClassName(rootClassName)[0];\r\n        parent.appendChild(img); \r\n        // img.style.opacity = 1;\r\n        // setTimeout(()=>{\r\n\r\n        // },)\r\n        gsap.to(img,\r\n            {duration: 0.8,scaleX:1,scaleY:1,opacity:1})\r\n        setTimeout(()=>{ \r\n            gsap.to(img,\r\n                {duration: 0.5,scaleX:0.5,scaleY:0.5,opacity:0})\r\n            setTimeout(()=>{\r\n                parent.removeChild(img);\r\n            },500) \r\n        },1000)\r\n    }\r\n    return handleMouseMove\r\n}\r\n\r\nexport default useFloatImg\r\n"]}