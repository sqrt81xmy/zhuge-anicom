{"version":3,"sources":["PointsImgClick_shrink.js"],"names":["usePointsImgClick","handleOnClick","pointsImgRef","position","scale","pointsNum","duration","pointsRef","current","getPointsRef","geometryRef","getGeometryRef","meshRef","getMeshRef","uTimeRef","getUTimeRef","gsap","to","value","delayedCall","x","y","fduration","z","updateGeometry"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,SAASA,iBAAT,GAA6B;AACzB,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,YAAD,EAAcC,QAAd,EAAuBC,KAAvB,EAA6BC,SAA7B,EAAyC;AAE3D,QAAMC,QAAQ,GAAG,GAAjB,CAF2D,CAIrD;;AACN,QAAMC,SAAS,GAAIL,YAAY,CAACM,OAAb,CAAqBC,YAArB,EAAnB;AACA,QAAMC,WAAW,GAAGR,YAAY,CAACM,OAAb,CAAqBG,cAArB,EAApB;AACA,QAAMC,OAAO,GAAGV,YAAY,CAACM,OAAb,CAAqBK,UAArB,EAAhB;AACA,QAAMC,QAAQ,GAAGZ,YAAY,CAACM,OAAb,CAAqBO,WAArB,EAAjB;;AACAC,oBAAKC,EAAL,CAAQH,QAAQ,CAACN,OAAjB,EAAyB;AACrBU,MAAAA,KAAK,EAAEZ,QAAQ,GAAC,IADK;AACAA,MAAAA,QAAQ,EAACA,QAAQ,GAAC;AADlB,KAAzB,EAT2D,CAY3D;AACA;AACA;AACA;AACA;;;AACAU,oBAAKG,WAAL,CAAiBb,QAAQ,GAAG,IAA5B,EAAkC,YAAM;AACpCU,sBAAKC,EAAL,CAAQH,QAAQ,CAACN,OAAjB,EAA0B;AACtBU,QAAAA,KAAK,EAAE,GADe;AAEtBZ,QAAAA,QAAQ,EAAEA,QAAQ,GAAG;AAFC,OAA1B;AAIH,KALD,EAjB2D,CAuB3D;;;AACAU,oBAAKC,EAAL,CAAQV,SAAS,CAACC,OAAV,CAAkBJ,KAA1B,EAAgC;AAC5BgB,MAAAA,CAAC,EAAEhB,KAAK,CAACgB,CADmB;AAChBC,MAAAA,CAAC,EAAEjB,KAAK,CAACiB,CADO;AAE5Bf,MAAAA,QAAQ,EAAC,IAAEA,QAAF,GAAW;AAFQ,KAAhC,EAxB2D,CA4B3D;AACA;AACA;AACA;AACA;;;AACAU,oBAAKC,EAAL,CAAQL,OAAO,CAACJ,OAAR,CAAgBJ,KAAxB,EAA8B;AAC1BgB,MAAAA,CAAC,EAAEhB,KAAK,CAACgB,CADiB;AACdC,MAAAA,CAAC,EAAEjB,KAAK,CAACiB,CADK;AAE1Bf,MAAAA,QAAQ,EAAC,IAAEA,QAAF,GAAW;AAFM,KAA9B,EAjC2D,CAqC3D;AACA;AACA;AACA;;;AACA,QAAMgB,SAAS,GAAG,GAAlB;AAAsB;;AACtBN,oBAAKG,WAAL,CAAiB,IAAEb,QAAF,GAAW,IAA5B,EAAiC,YAAI;AACjCU,sBAAKC,EAAL,CAAQV,SAAS,CAACC,OAAV,CAAkBL,QAA1B,EACI;AAAGiB,QAAAA,CAAC,EAAGjB,QAAQ,CAACiB,CAAhB;AAAmBC,QAAAA,CAAC,EAAGlB,QAAQ,CAACkB,CAAhC;AAAmCE,QAAAA,CAAC,EAAC,CAArC;AACIjB,QAAAA,QAAQ,EAAEgB,SAAS,GAAC;AADxB,OADJ;;AAIAN,sBAAKC,EAAL,CAAQL,OAAO,CAACJ,OAAR,CAAgBL,QAAxB,EACI;AAAGiB,QAAAA,CAAC,EAAGjB,QAAQ,CAACiB,CAAhB;AAAmBC,QAAAA,CAAC,EAAGlB,QAAQ,CAACkB,CAAhC;AAAmCE,QAAAA,CAAC,EAAC,CAArC;AACIjB,QAAAA,QAAQ,EAAEgB,SAAS,GAAC;AADxB,OADJ;AAIH,KATD;;AAUApB,IAAAA,YAAY,CAACM,OAAb,CAAqBgB,cAArB,CAAoCnB,SAApC;AACH,GArDD,CADyB,CAuDvB;;;AACF,SAAOJ,aAAP;AACH;;eAEcD,iB","sourcesContent":["import { click } from \"@testing-library/user-event/dist/click\";\r\nimport { useEffect,useState } from \"react\";\r\nimport { gsap } from \"gsap-trial\";\r\nimport { PlaneGeometry } from \"three\";\r\n\r\nfunction usePointsImgClick() { \r\n    const handleOnClick = (pointsImgRef,position,scale,pointsNum)=>{\r\n      \r\n        const duration = 800;\r\n        \r\n              //抖抖抖 快\r\n        const pointsRef =  pointsImgRef.current.getPointsRef();\r\n        const geometryRef = pointsImgRef.current.getGeometryRef(); \r\n        const meshRef = pointsImgRef.current.getMeshRef(); \r\n        const uTimeRef = pointsImgRef.current.getUTimeRef();\r\n        gsap.to(uTimeRef.current,{\r\n            value: duration/1000,duration:duration/1000, \r\n        })\r\n        //   const geometry = new PlaneGeometry(1,1,200,200);\r\n        //   pointsRef.current.geometry.dispose(); // 清理旧的几何体\r\n        //   pointsRef.current.geometry = geometry; // 更新几何体\r\n        //   geometryRef.current = geometry;  \r\n        //抖抖抖 慢\r\n        gsap.delayedCall(duration / 1000, () => {\r\n            gsap.to(uTimeRef.current, {\r\n                value: 0.0,\r\n                duration: duration / 1000, \r\n            });\r\n        });\r\n        //变小\r\n        gsap.to(pointsRef.current.scale,{\r\n            x: scale.x, y: scale.y,\r\n            duration:2*duration/1000\r\n        })\r\n        // gsap.to(pointsRef.current.position,{\r\n        //     x:0, y:0,\r\n        //     duration:2*duration/1000\r\n        // })\r\n        //meshRef\r\n        gsap.to(meshRef.current.scale,{\r\n            x: scale.x, y: scale.y,\r\n            duration:2*duration/1000\r\n        })\r\n        // gsap.to(meshRef.current.position,{\r\n        //     x:0, y:0,\r\n        //     duration:2*duration/1000\r\n        // })\r\n        const fduration = 600;; \r\n        gsap.delayedCall(2*duration/1000,()=>{ \r\n            gsap.to(pointsRef.current.position, \r\n                {  x:  position.x, y:  position.y, z:0,\r\n                    duration: fduration/1000 \r\n                }); \r\n            gsap.to(meshRef.current.position, \r\n                {  x:  position.x, y:  position.y, z:0,\r\n                    duration: fduration/1000 \r\n                }); \r\n        }) \r\n        pointsImgRef.current.updateGeometry(pointsNum)\r\n    } \r\n      //回归原位置\r\n    return handleOnClick\r\n}\r\n\r\nexport default usePointsImgClick\r\n"],"file":"PointsImgClick_shrink.dev.js"}